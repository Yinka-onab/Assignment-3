<%- include("partials/header", { title: "Events", user: currentUser }) %>

<h2 class="mb-4">Events (Earliest â†’ Latest)</h2>

<a href="/events/add" class="btn btn-success mb-4">Add Event</a>

<div class="row row-cols-1 row-cols-md-3 g-4">
  <% events.forEach(ev => { %>
  <div class="col">
    <div class="card h-100 shadow-sm">

      <div class="card-body">
        <h5 class="card-title"><%= ev.title %></h5>
        <% if (ev.date) { %>
          <h6 class="card-subtitle mb-2 text-muted"><%= new Date(ev.date).toDateString() %></h6>
        <% } else { %>
          <h6 class="card-subtitle mb-2 text-muted text-danger">No date provided</h6>
        <% } %>
        <p class="card-text">
          <strong>Location:</strong> <%= ev.location %><br>
          <strong>Description:</strong> <%= ev.description %>
        </p>
      </div>

      <div class="card-footer d-flex justify-content-between">
        <a href="/events/edit/<%= ev._id %>" class="btn btn-warning btn-sm">Edit</a>

        <form action="/events/delete/<%= ev._id %>" method="POST"
          onsubmit="return confirm('Are you sure you want to delete this event?');">
          <button class="btn btn-danger btn-sm">Delete</button>
        </form>
      </div>

    </div>
  </div>
  <% }) %>
</div>

<%- include("partials/footer") %>